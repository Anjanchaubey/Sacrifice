<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Caffine</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>
</head>
<body class="bg-gradient-to-br from-amber-50 to-amber-100 dark:from-black dark:to-amber-950 min-h-screen flex items-center justify-center p-4">
    
    <div class="w-full max-w-md">
        <div class="text-center mb-8">
            <img src="logo.png" alt="Caffine" class="w-20 h-20 mx-auto mb-4">
            <h1 class="text-3xl font-bold text-slate-900 dark:text-amber-300">Caffine</h1>
            <p class="text-slate-600 dark:text-amber-400 mt-2">Track your study journey</p>
        </div>

        <div class="bg-white dark:bg-black rounded-3xl shadow-2xl p-8 border border-amber-100 dark:border-amber-800">
            <div class="flex gap-2 mb-6">
                <button id="loginTab" class="flex-1 py-2 px-4 rounded-xl font-semibold transition-colors bg-amber-500 text-white">Login</button>
                <button id="signupTab" class="flex-1 py-2 px-4 rounded-xl font-semibold transition-colors text-slate-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20">Sign Up</button>
            </div>

            <form id="authForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 dark:text-amber-300 mb-2">Email</label>
                    <input type="email" id="email" required class="w-full px-4 py-3 rounded-xl border border-amber-200 dark:border-amber-800 bg-white dark:bg-black text-slate-900 dark:text-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-500">
                </div>

                <div>
                    <label class="block text-sm font-medium text-slate-700 dark:text-amber-300 mb-2">Password</label>
                    <input type="password" id="password" required class="w-full px-4 py-3 rounded-xl border border-amber-200 dark:border-amber-800 bg-white dark:bg-black text-slate-900 dark:text-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-500">
                </div>

                <div id="errorMsg" class="hidden text-red-500 text-sm text-center p-2 bg-red-50 dark:bg-red-900/20 rounded-lg"></div>

                <button type="submit" id="submitBtn" class="w-full py-3 px-4 bg-amber-500 hover:bg-amber-600 text-white font-semibold rounded-xl transition-colors">
                    Login
                </button>
            </form>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCYY2GQqS0tCXb7Oxw8AWXhpexq9e8VRUs",
            authDomain: "aspirehub-32863.firebaseapp.com",
            projectId: "aspirehub-32863",
            storageBucket: "aspirehub-32863.appspot.com",
            messagingSenderId: "686810111182",
            appId: "1:686810111182:web:4290b4b1b6e64934ec449f"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const loginTab = document.getElementById('loginTab');
        const signupTab = document.getElementById('signupTab');
        const authForm = document.getElementById('authForm');
        const submitBtn = document.getElementById('submitBtn');
        const errorMsg = document.getElementById('errorMsg');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');

        let isLoginMode = true;

        loginTab.addEventListener('click', () => {
            isLoginMode = true;
            loginTab.className = 'flex-1 py-2 px-4 rounded-xl font-semibold transition-colors bg-amber-500 text-white';
            signupTab.className = 'flex-1 py-2 px-4 rounded-xl font-semibold transition-colors text-slate-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20';
            submitBtn.textContent = 'Login';
            errorMsg.classList.add('hidden');
        });

        signupTab.addEventListener('click', () => {
            isLoginMode = false;
            signupTab.className = 'flex-1 py-2 px-4 rounded-xl font-semibold transition-colors bg-amber-500 text-white';
            loginTab.className = 'flex-1 py-2 px-4 rounded-xl font-semibold transition-colors text-slate-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20';
            submitBtn.textContent = 'Sign Up';
            errorMsg.classList.add('hidden');
        });

        authForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            errorMsg.classList.add('hidden');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Please wait...';

            const email = emailInput.value;
            const password = passwordInput.value;

            try {
                if (isLoginMode) {
                    await signInWithEmailAndPassword(auth, email, password);
                } else {
                    await createUserWithEmailAndPassword(auth, email, password);
                }
                window.location.href = 'index.html';
            } catch (error) {
                errorMsg.textContent = error.message;
                errorMsg.classList.remove('hidden');
                submitBtn.disabled = false;
                submitBtn.textContent = isLoginMode ? 'Login' : 'Sign Up';
            }
        });

        // Check if already logged in
        onAuthStateChanged(auth, (user) => {
            if (user) {
                window.location.href = 'index.html';
            }
        });
    </script>
</body>
</html>
